(()=>{"use strict";var s={23:s=>{s.exports=require("util")},317:s=>{s.exports=require("child_process")},398:s=>{s.exports=require("vscode")},555:(s,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GitManager=void 0;const n=t(398),a=t(317),o=(0,t(23).promisify)(a.exec);e.GitManager=class{constructor(){this.lastStatus="",this.channel=n.window.createOutputChannel("Laravel Git")}async showStatus(){try{const s=await this.executeGitCommand("status --porcelain");this.lastStatus=s.stdout,s.stdout?(n.window.showInformationMessage(`Git Status:\n${s.stdout}`),this.channel.appendLine(`Status:\n${s.stdout}`),this.channel.show()):n.window.showInformationMessage("Working directory is clean")}catch(s){n.window.showErrorMessage(`Error getting status: ${s.message}`),this.channel.appendLine(`Error: ${s.message}`),this.channel.show()}}async commitChanges(){const s=await n.window.showInputBox({prompt:"Enter commit message",placeHolder:"Commit message"});if(s)try{await this.executeGitCommand("add .");const e=await this.executeGitCommand(`commit -m "${s}"`);n.window.showInformationMessage(`Committed: ${s}`),this.channel.appendLine(`Commit: ${e.stdout}`),this.channel.show(),this.showStatus()}catch(s){n.window.showErrorMessage(`Error committing: ${s.message}`),this.channel.appendLine(`Error: ${s.message}`),this.channel.show()}}async pushChanges(){try{const s=await this.executeGitCommand("push");n.window.showInformationMessage("Pushed changes successfully"),this.channel.appendLine(`Push: ${s.stdout}`),this.channel.show()}catch(s){n.window.showErrorMessage(`Error pushing: ${s.message}`),this.channel.appendLine(`Error: ${s.message}`),this.channel.show()}}async pullChanges(){try{const s=await this.executeGitCommand("pull");n.window.showInformationMessage("Pulled changes successfully"),this.channel.appendLine(`Pull: ${s.stdout}`),this.channel.show(),this.showStatus()}catch(s){n.window.showErrorMessage(`Error pulling: ${s.message}`),this.channel.appendLine(`Error: ${s.message}`),this.channel.show()}}async showLog(){try{const s=await this.executeGitCommand("log --oneline -10");s.stdout?(n.window.showInformationMessage(`Git Log:\n${s.stdout}`),this.channel.appendLine(`Log:\n${s.stdout}`),this.channel.show()):n.window.showInformationMessage("No commits found")}catch(s){n.window.showErrorMessage(`Error getting log: ${s.message}`),this.channel.appendLine(`Error: ${s.message}`),this.channel.show()}}async showBranches(){try{const s=await this.executeGitCommand("branch");s.stdout?(n.window.showInformationMessage(`Git Branches:\n${s.stdout}`),this.channel.appendLine(`Branches:\n${s.stdout}`),this.channel.show()):n.window.showInformationMessage("No branches found")}catch(s){n.window.showErrorMessage(`Error getting branches: ${s.message}`),this.channel.appendLine(`Error: ${s.message}`),this.channel.show()}}async checkoutBranch(){try{const s=(await this.executeGitCommand("branch")).stdout.split("\n").map(s=>s.trim().replace("* ","")).filter(s=>s.length>0);if(0===s.length)return void n.window.showErrorMessage("No branches found");const e=await n.window.showQuickPick(s,{placeHolder:"Select branch to checkout"});if(e){const s=await this.executeGitCommand(`checkout ${e}`);n.window.showInformationMessage(`Switched to branch: ${e}`),this.channel.appendLine(`Checkout: ${s.stdout}`),this.channel.show(),this.showStatus()}}catch(s){n.window.showErrorMessage(`Error checking out branch: ${s.message}`),this.channel.appendLine(`Error: ${s.message}`),this.channel.show()}}registerGitEvents(){n.workspace.createFileSystemWatcher("**/*").onDidChange(()=>{setTimeout(()=>{this.showStatus()},1e3)}),n.workspace.onDidChangeWorkspaceFolders(()=>{this.showStatus()})}async executeGitCommand(s){const e=`cd "${n.workspace.rootPath||"."}" && ${n.workspace.getConfiguration("vscode-laravel-git").get("gitPath")||"git"} ${s}`;this.channel.appendLine(`Executing: ${e}`);try{return await o(e,{maxBuffer:1048576})}catch(s){throw new Error(`Command failed: ${s.message}`)}}}}},e={};function t(n){var a=e[n];if(void 0!==a)return a.exports;var o=e[n]={exports:{}};return s[n](o,o.exports,t),o.exports}var n={};(()=>{var s=n;Object.defineProperty(s,"__esModule",{value:!0}),s.deactivate=s.activate=void 0;const e=t(398),a=t(555);let o;s.activate=function(s){console.log("Laravel Git extension is now active!"),o=new a.GitManager;const t=e.commands.registerCommand("vscode-laravel-git.status",()=>{o.showStatus()}),n=e.commands.registerCommand("vscode-laravel-git.commit",()=>{o.commitChanges()}),i=e.commands.registerCommand("vscode-laravel-git.push",()=>{o.pushChanges()}),r=e.commands.registerCommand("vscode-laravel-git.pull",()=>{o.pullChanges()}),c=e.commands.registerCommand("vscode-laravel-git.log",()=>{o.showLog()}),h=e.commands.registerCommand("vscode-laravel-git.branch",()=>{o.showBranches()}),d=e.commands.registerCommand("vscode-laravel-git.checkout",()=>{o.checkoutBranch()});s.subscriptions.push(t),s.subscriptions.push(n),s.subscriptions.push(i),s.subscriptions.push(r),s.subscriptions.push(c),s.subscriptions.push(h),s.subscriptions.push(d);const u=e.window.createStatusBarItem(e.StatusBarAlignment.Left,100);u.command="vscode-laravel-git.status",u.text="$(git-branch) Laravel Git",u.tooltip="Laravel Git Extension",u.show(),s.subscriptions.push(u),o.registerGitEvents()},s.deactivate=function(){console.log("Laravel Git extension is now deactivated!")}})(),module.exports=n})();